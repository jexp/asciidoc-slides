== Enterprise model revisited

TODO ER model or tables

== Find member of the IT-Department

[options="step"]
with SQL:

[options="step"]
[source,plsql]
----
SELECT * FROM NaturalPerson
LEFT JOIN NaturalPerson_OrganizationalUnit 
  ON NaturalPerson.Id = NaturalPerson_OrganizationalUnit.PersonId
LEFT JOIN OrganizationalUnit
  ON OrganizationalUnit.Id = NaturalPerson_OrganizationalUnit.UnitId
WHERE OrganizationalUnit.name = "IT-Department"
----


[options="step"]
with Cypher...

[canvas-image="./img/pattern.jpg"]
== It's all about patterns

[role="canvas-caption", position="center"]
It's all about patterns

++++
<div class="img-ref">
<a href="https://www.flickr.com/photos/just-textures/14225505282">"16_22_inv"</a> by <a href="https://www.flickr.com/photos/just-textures/">Ed Jones</a> / <a href="http://creativecommons.org/licenses/by/2.0/">CC BY</a>
<div>
++++

== From Tables to Patterns

[options="step"]
What graph pattern are we looking for?

== From Tables to Patterns

What graph pattern are we looking for?


[options="step"]
++++
<figure class="graph-diagram">
  <ul class="graph-diagram-markup" data-internal-scale="1.47" data-external-scale="0.5">
    <li class="node" data-node-id="1" data-x="-676" data-y="-19">
      <span class="caption">p:NaturalPerson</span>
    </li>
    <li class="node" data-node-id="2" data-x="221.7539520263672" data-y="-19">
      <span class="caption">u:OrganizationalUnit</span>
    </li>
    <li class="relationship" data-from="1" data-to="2">
      <span class="type">:MEMBER</span>
    </li>
  </ul>
</figure>
++++

[options="step"]
The pattern in Cypher:

[options="step"]
[source,cypher]
----
(p:NaturalPerson)-[:MEMBER]->(u:OrganizationalUnit)
----

== From SQL to Cypher

[options="step"]
`MATCH` allows you to find a pattern in the graph

[options="step"]
[source,cypher]
----
MATCH (p:NaturalPerson)-[:MEMBER]->(u:OrganizationalUnit)
RETURN p.canonicalName, u.name
----

[options="step"]
`WHERE` allows you to filter the results

[options="step"]
[source,cypher]
----
MATCH (p:NaturalPerson)-[:MEMBER]->(u:OrganizationalUnit)
WHERE u.name = "IT-Department"
RETURN p.canonicalName, u.name
----

== SQL vs. Cypher

[options="step"]
[source,plsql]
----
SELECT * FROM NaturalPerson
LEFT JOIN NaturalPerson_OrganizationalUnit 
  ON NaturalPerson.Id = NaturalPerson_OrganizationalUnit.PersonId
LEFT JOIN OrganizationalUnit
  ON OrganizationalUnit.Id = NaturalPerson_OrganizationalUnit.UnitId
WHERE OrganizationalUnit.name = "IT-Department"
----

[options="step"]
[source,cypher]
----
MATCH (p:NaturalPerson)-[:MEMBER]->(u:OrganizationalUnit)
WHERE u.name = "IT-Department"
RETURN p.canonicalName, u.name
----
