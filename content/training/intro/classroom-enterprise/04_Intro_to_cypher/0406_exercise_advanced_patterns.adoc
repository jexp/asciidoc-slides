[canvas-image="./img/coding-sw.jpg"]
== It's your turn!

[role="canvas-caption", position="center"]
It's your turn!

++++
<div class="img-ref">
derivative of <a href="https://www.flickr.com/photos/adikos/4440682278">"Female Typing"</a> by <a href="https://www.flickr.com/photos/adikos/">Adikos</a> / <a href="http://creativecommons.org/licenses/by/2.0/">CC BY</a>
<div>
++++

== Advanced queries 

- Who is working in "Project X" at "GraphIT"?
- Who is the lead of the "QA" department at "GraphIT"?
- How many hours per week is Daniel working?
- Find the three persons with the lowest hours per week.
- Who is having the same role in projects? 
- Is Alice a superior of Daniel? 

== Members of "Project X"

[source,cypher,options="step"]
----
MATCH (h:Human)<-[:MEMBER]-(p:Project),
  p-[:BELONGS_TO]->(:Dept)-[:PARENT*0..]->(o:Org)
WHERE p.name = "Project X" AND o.name = "GraphIT"
RETURN h.name;
----

== Lead of "QA" at "GraphIT"

[source,cypher,options="step"]
----
MATCH (h:Human)<-[:LEAD]-(d:Dept),
  d-[:PARENT*0..]->(o:Org)
WHERE d.name = "QA" AND o.name = "GraphIT"
RETURN h.name;
----

== Hours per week of Daniel

[source,cypher,options="step"]
----
MATCH (h:Human)<-[e:EMPLOYEE]-(d:Dept)
WHERE h.name = "Daniel"
RETURN sum(e.hoursPerWeek) as `hours per week`;
----

== People with lowest hours per week

[source,cypher,options="step"]
----
MATCH (h:Human)<-[e:EMPLOYEE]-(d:Dept)
RETURN h.name AS name, sum(e.hoursPerWeek) as `hours per week`
ORDER BY `hours per week`
LIMIT 3;
----

== People with same role in different projects

[source,cypher,options="step"]
----
MATCH (h:Human)<-[m1:MEMBER]-(p1:Project),
h<-[m2:MEMBER]-(p2:Project)
WHERE m1.role = m2.role
RETURN h.name AS name, p1.name, p2.name, m1.role as role;
----

== Is Alice a superior of Daniel?

[source,cypher,options="step"]
----
MATCH (a:Human)<-[:LEAD]-(d1:Dept),
  d1<-[:PARENT*0..]-(:Dept)-[:EMPLOYEE]->(d:Human)
WHERE a.name = "Alice" 
  AND d.name = "Daniel"
RETURN a, d;
----
